!function(){"use strict";var t=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=document.querySelector(e),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_hideInputError(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_showInputError(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputList)?this.disableButton(this._submitButton):this._enableButton(this._submitButton)}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}};function e(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class s{constructor(t){this._popupElement=document.querySelector(`#${t}`),this._handleEscDown=this._handleEscDown.bind(this),this._handleOverlay=this._handleOverlay.bind(this),this._closeButton=this._popupElement.querySelector(".modal__close-button"),this.closePopup=this.closePopup.bind(this)}openPopup(){this._popupElement.classList.add("modal_opened"),this.setEventsListeners()}closePopup(){this._popupElement.classList.remove("modal_opened"),this.removeEventsListeners()}setEventsListeners(){this._closeButton.addEventListener("click",this.closePopup),document.addEventListener("keydown",this._handleEscDown),this._popupElement.addEventListener("mousedown",this._handleOverlay)}removeEventsListeners(){this._closeButton.removeEventListener("click",this.closePopup),document.removeEventListener("keydown",this._handleEscDown),this._popupElement.removeEventListener("mousedown",this._handleOverlay)}_handleEscDown(t){"Escape"===t.key&&this.closePopup()}_handleOverlay(t){t.target.classList.contains("modal")&&this.closePopup()}}class i extends s{constructor(t){let{popupSelector:e,handleFormSubmit:s}=t;var i,n;super(e),n=t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues())},(i="handleSubmit")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=s}_getInputValues(){const t={};return this._inputList.forEach((e=>t[e.name]=e.value)),t}setEventsListeners(){super.setEventsListeners(),this._popupForm.addEventListener("submit",this.handleSubmit)}removeEventsListeners(){super.removeEventsListeners(),this._popupForm.removeEventListener("submit",this.handleSubmit)}closePopup(){this._popupForm.reset(),super.closePopup()}}const n=[{title:"Grand Prismatic Spring",link:"https://images.unsplash.com/photo-1533419784160-1f7f79022119?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1466&q=80"},{title:"Thor's Well",link:"https://images.unsplash.com/photo-1617128734662-66da6c1d3505?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=884&q=80"},{title:"Multnomah Falls",link:"https://images.unsplash.com/photo-1524338198850-8a2ff63aaceb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=715&q=80"},{title:"Lake Tahoe",link:"https://images.unsplash.com/photo-1548954042-c23fc6226ddf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=688&q=80"},{title:"Antelope Canyon",link:"https://images.unsplash.com/photo-1602088693260-78f2c76287c1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"},{title:"Cape Elizabeth",link:"https://images.unsplash.com/photo-1520450202524-87e5dd06a74b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=764&q=80"}],o={inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),a=document.querySelector(".modal__name"),u=document.querySelector(".modal__about-me"),c=t=>{const s=new class{constructor(t,s){let{data:i,handleImageClick:n}=t;e(this,"_handleLike",(()=>{this._likeButton.classList.toggle("card__like-button_active")})),e(this,"_handleDelete",(()=>{this._card.remove(),this._card=null})),this._title=i.title,this._link=i.link,this._handleImageClick=n,this._cardSelector=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._card.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({link:this._link,title:this._title}))),this._likeButton.addEventListener("click",this._handleLike),this._card.querySelector(".card__delete-button").addEventListener("click",this._handleDelete)}getView(){this._card=this._getTemplate(),this._likeButton=this._card.querySelector(".card__like-button");const t=this._card.querySelector(".card__image"),e=this._card.querySelector(".card__title");return t.src=this._link,t.alt=this._title,e.textContent=this._title,this._setEventListeners(),this._card}}({data:t,handleImageClick:t=>{h.open(t)}},"#card-template");_.addItem(s.getView())},d=new class{constructor(t,e){this._userNameElement=document.querySelector(t),this._userDescriptionElement=document.querySelector(e)}getUserInfo(){return{name:this._userNameElement.textContent,description:this._userDescriptionElement.textContent}}setUserInfo(t){let{name:e,description:s}=t;this._userNameElement.textContent=e,this._userDescriptionElement.textContent=s}}(".profile__name",".profile__description"),h=new class extends s{constructor(t){super(t),this._imageElement=this._popupElement.querySelector(".modal__image"),this._imageCaption=this._popupElement.querySelector(".modal__caption")}open(t){let{link:e,title:s}=t;this._imageElement.src=e,this._imageElement.alt=`Image of ${s}`,this._imageCaption.textContent=s,super.openPopup()}}("image-modal"),_=new class{constructor(t,e){let{items:s,renderer:i}=t;this._renderer=i,this._container=document.querySelector(e)}renderItems(t){t.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:n,renderer:c},".gallery__grid"),p=new t(o,".modal__form_edit"),m=new t(o,".modal__form_add"),b=new i({popupSelector:"edit-modal",handleFormSubmit:t=>{d.setUserInfo(t),b.closePopup(),p.disableButton()}}),f=new i({popupSelector:"add-modal",handleFormSubmit:t=>{c(t),f.closePopup(),m.disableButton()}});_.renderItems(n),h.setEventsListeners(),p.enableValidation(),m.enableValidation(),r.addEventListener("click",(()=>{const{name:t,description:e}=d.getUserInfo();a.value=t,u.value=e,b.openPopup()})),l.addEventListener("click",(()=>{f.openPopup()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrOi8vQXJvdW5kVGhlVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9Bcm91bmRUaGVVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kVGhlVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZFRoZVVTLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL0Fyb3VuZFRoZVVTLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9Bcm91bmRUaGVVUy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL0Fyb3VuZFRoZVVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kVGhlVVMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybUVsZW1lbnQpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3BvcHVwU2VsZWN0b3J9YCk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NEb3duID0gdGhpcy5faGFuZGxlRXNjRG93bi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlT3ZlcmxheSA9IHRoaXMuX2hhbmRsZU92ZXJsYXkuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuY2xvc2VQb3B1cCA9IHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLnNldEV2ZW50c0xpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5yZW1vdmVFdmVudHNMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50c0xpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlUG9wdXApO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjRG93bik7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50c0xpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlUG9wdXApO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjRG93bik7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NEb3duKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3ZlcmxheShldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm1zIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudHNMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudHNMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuaGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50c0xpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnJlbW92ZUV2ZW50c0xpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIHRpdGxlOiBcIkdyYW5kIFByaXNtYXRpYyBTcHJpbmdcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzM0MTk3ODQxNjAtMWY3Zjc5MDIyMTE5P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDY2JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIlRob3IncyBXZWxsXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTI4NzM0NjYyLTY2ZGE2YzFkMzUwNT9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODg0JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIk11bHRub21haCBGYWxsc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyNDMzODE5ODg1MC04YTJmZjYzYWFjZWI/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTcxNSZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJMYWtlIFRhaG9lXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ4OTU0MDQyLWMyM2ZjNjIyNmRkZj9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg4JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkFudGVsb3BlIENhbnlvblwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwMjA4ODY5MzI2MC03OGYyYzc2Mjg3YzE/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTczNSZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJDYXBlIEVsaXphYmV0aFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyMDQ1MDIwMjUyNC04N2U1ZGQwNmE3NGI/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc2NCZxPTgwXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRMaXN0OiBcIi5nYWxsZXJ5X19ncmlkXCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgLy8gUG9wdXBzXHJcbiAgcHJldmlld1BvcHVwOiBcImltYWdlLW1vZGFsXCIsXHJcbiAgZWRpdFBvcHVwOiBcImVkaXQtbW9kYWxcIixcclxuICBhZGRQb3B1cDogXCJhZGQtbW9kYWxcIixcclxuICAvLyBGb3Jtc1xyXG4gIGFkZEZvcm06IFwiLm1vZGFsX19mb3JtX2FkZFwiLFxyXG4gIGVkaXRGb3JtOiBcIi5tb2RhbF9fZm9ybV9lZGl0XCIsXHJcbiAgLy8gUHJvZmlsZSBFbGVtZW50c1xyXG4gIHVzZXJOYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgdXNlckFib3V0TWU6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgLy8gQnV0dG9uc1xyXG4gIGNsb3NlQnV0dG9uczogXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIsXHJcbiAgZWRpdFByb2ZpbGVCdXR0b246IFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIsXHJcbiAgYWRkQ2FyZEJ1dHRvbjogXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiLFxyXG59O1xyXG4iLCIvLyBJbXBvcnQgc3R5bGVzaGVldFxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSW1wb3J0IGFsbCB0aGUgY2xhc3Nlc1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMsIHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX25hbWVcIik7XHJcbmNvbnN0IGlucHV0QWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Fib3V0LW1lXCIpO1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6IChpbWdEYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKGltZ0RhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcclxuICApO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsLmdldFZpZXcoKSk7XHJcbn07XHJcblxyXG4vLyBDbGFzcyBJbnN0YW5jZXNcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oc2VsZWN0b3JzLnVzZXJOYW1lLCBzZWxlY3RvcnMudXNlckFib3V0TWUpO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gIH0sXHJcbiAgc2VsZWN0b3JzLmNhcmRMaXN0XHJcbik7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgc2VsZWN0b3JzLmVkaXRGb3JtXHJcbik7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBzZWxlY3RvcnMuYWRkRm9ybSk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5lZGl0UG9wdXAsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG5cclxuICAgIGVkaXRGb3JtUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG4gICAgZWRpdEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH0sXHJcbn0pO1xyXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmFkZFBvcHVwLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XHJcbiAgICByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gICAgYWRkRm9ybVBvcHVwLmNsb3NlUG9wdXAoKTtcclxuICAgIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBDbGFzc2VzXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyk7XHJcbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRzTGlzdGVuZXJzKCk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBBbGwgdGhlIHJlc3RcclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgaW5wdXRBYm91dE1lLnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgZWRpdEZvcm1Qb3B1cC5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVBvcHVwLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVJbWFnZUNsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVEZWxldGUgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIHRpdGxlOiB0aGlzLl90aXRsZSB9KVxyXG4gICAgICApO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZSk7XHJcbiAgICB0aGlzLl9jYXJkXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJEZXNjcmlwdGlvblNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHVzZXJEZXNjcmlwdGlvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oe2xpbmssIHRpdGxlfSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gYEltYWdlIG9mICR7dGl0bGV9YDtcclxuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJfaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJzb21lIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Rvd24iLCJiaW5kIiwiX2hhbmRsZU92ZXJsYXkiLCJfY2xvc2VCdXR0b24iLCJjbG9zZVBvcHVwIiwib3BlblBvcHVwIiwic2V0RXZlbnRzTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRzTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybXMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJwcmV2ZW50RGVmYXVsdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX3BvcHVwRm9ybSIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJoYW5kbGVTdWJtaXQiLCJyZXNldCIsImluaXRpYWxDYXJkcyIsInRpdGxlIiwibGluayIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0QWJvdXRNZSIsInJlbmRlckNhcmQiLCJkYXRhIiwiY2FyZEVsIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9saWtlQnV0dG9uIiwidG9nZ2xlIiwiX2NhcmQiLCJfdGl0bGUiLCJfbGluayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVEZWxldGUiLCJnZXRWaWV3IiwiaW1hZ2VFbGVtZW50IiwiY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiaW1nRGF0YSIsImNhcmRQcmV2aWV3UG9wdXAiLCJvcGVuIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJfaW1hZ2VFbGVtZW50IiwiX2ltYWdlQ2FwdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImFkZEZvcm1Qb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=